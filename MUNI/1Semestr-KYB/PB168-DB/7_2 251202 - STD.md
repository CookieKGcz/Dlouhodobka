# Stavové modely, DFD s řízením, vyvažování modelů
## Stavy systému
- Stav:
	- ==Množina okolností nebo atributů charakterizujících osobu nebo věc v daném čase; způsob nebo forma existence; podmínka.==
- Název obvykle označuje nějakou formu čekání systému
	- v názvu je jmenována skutečnost, která má nastat
## Změny stavu
- **U systému, který má striktně vymezená pravidla** chování nelze přejít z jednoho stavu do libovolného dalšího stavu náhodně; **rozlišujeme, které změny jsou smysluplné a platné**.
- ![[Pasted image 20251202174001.png | 140]]
## Počáteční a koncový stav
- Systém může mít jen jeden iniciální stav, ale více různých koncových stavů.
- ![[Pasted image 20251202174045.png | 300]]
- ![[Pasted image 20251202174101.png | 100]]
## Podmínka a akce přechodu
- Změna stavu u esenciálního modelu probíhá okamžitě

- **Popis přechodu**
	- ==podmínka==, při jejímž splnění nastává změna stavu
	- ==akce==, kterou systém provede při změně stavu

- Podmínka je nějaká událost ve vnějším okolí, kterou je systém schopen detekovat (signál, přerušení, příchod datového paketu).
- Systém provede přechod ze stavu:
	- „čekání na X“ do stavu „čekání na Y“
	- „činnost X“ a zahájí provádění „činnosti Y“
- Akce jsou buď odezvy do vnějšího okolí, nebo výpočty, jejichž výsledky si systém pamatuje, aby mohl později reagovat na další události.

## Příklad STD - „Ze života“
- ![[Pasted image 20251202174327.png | 500]]
## Tvorba stavového diagramu
1. Identifikovat všechny možné stavy systému, reprezentovat každý z nich jako samostatný obdélník.
2. Vyšetřit všechny smysluplné přechody mezi stavy. Začít zakreslením výchozího stavu, poté metodicky sledovat vývoj do dalších stavů.
3. Prověřit konzistenci STD a hierarchii STD.
4. Prověřit konzistenci STD proti jiným modelům systému
## Konzistence STD
- Byly definovány všechny stavy?
- Jsou všechny stavy dosažitelné?
- Lze opustit všechny stavy?
- Reaguje systém ve všech stavech na všechny možné podmínky?
	- Nejčastější chybou je opomenutí přechodů, které nastanou za neočekávaných podmínek
## Vztah mezi CDFD a STD
- CDFD
	- Control Data Flow Diagram
	- DFD rozšířený o řídící procesy, toky a paměti.
- ![[Pasted image 20251202174553.png | 300]]
- Každý **řídící proces** je popsán pomocí STD.
- **Vstupní signály** se uplatňují v podmínkách přechodů
- **Akcím přechodů** odpovídají procesy na CDFD.
## Příklad CDFD - Příjem objednávek
- ![[Pasted image 20251202174710.png | 500]]
## Vyvažování modelů
- Souhrn probraných nástrojů strukturované analýzy:
	- Kontextový diagram
	- DFD
	- Minispecifikace procesů
	- Datový slovník - DD
	- ERD
	- STD
	- CDFD
- Vyvažování
	- **vzájemná kontrola** mezi **modely** a **uvnitř hierarchie modelů**.
### Vyvažování DFD - DD
- **Každý datový tok a každá datová paměť** na DFD musí být **definovány v datovém slovníku**.
	- Pokud v něm **chybí**, jsou **považovány za nedefinované**.
- Každý datový element nebo paměť definované v datovém slovníku se musí vyskytovat někde na DFD.
	- V opačném případě jsou považovány za přebytečné, za nepoužité v systému.
### Vyvažování DFD - minispecifikace
- (Pravidla se vztahují na procesy, které řeší zpracování dat)

- Každý proces na DFD musí být asociován s DFD na nižší úrovni nebo se specifikací procesu, ale nikoliv současně s oběma.
	- Pokud existují obě definice procesu, je model zbytečně a nebezpečně redundantní.
- Každá specifikace procesu musí mít sdružený proces na nejnižší úrovni.
	- Pokud chybí procesy, pak byly obvykle zrušeny při úpravách DFD.
- Musí souhlasit vstupy a výstupy. -> Vstupní a výstupní toky stejně jako paměti zakreslené u procesu na DFD by měly mít odpovídající operace ve specifikaci (GET, INPUT, DISPLAY ...).
### Vyvažování DD - minispecifikace
- Pro každý odkaz ve specifikaci procesu (obvykle podstatné jméno) musí platit jedna z následujících skutečností:
	- Souhlasí se jménem datového toku nebo datové paměti připojené k procesu, který minispecifikace popisuje.
	- Může to být lokální název, explicitně definovaný ve specifikaci.
	- Položka v datovém slovníku je komponentou datového toku nebo datové paměti připojené k procesu
### Vyvažování ERD - DFD + minispecifikace
- Paměť na DFD musí odpovídat objektovému typu, relaci nebo jejich kombinaci (asociovanému objektu) na ERD.
	- Výskyt paměti bez odpovídajícího objektového typu nebo objektový typ bez odpovídající paměti jsou považovány za chybu.
- Jména objektových typů na ERD a datových pamětí na DFD musí odpovídat.
	- Konvence předpokládá použití množného čísla na DFD a jednotného čísla na ERD.
- Položky v datovém slovníku musí být aplikovatelné současně na DFD i na ERD. Datový slovník musí obsahovat současně definici objektu z ERD i paměti z DFD.

- ![[Pasted image 20251202175408.png | 270]]
### Vyvažování ERD - DFD + minispecifikace
- Vytvoření a rušení instancí každého objektového typu a relace uvedené na ERD
- ![[Pasted image 20251202175535.png | 400]]
- V DFD musí existovat procesy, které přiřadí hodnoty každému datovému elementu, který je atributem objektového typu
### Vyvažování DFD - STD
- Pro každý řídící proces existuje stavový diagram jako jeho specifikace.
	- Ke každému stavovému diagramu musí existovat řídící proces na DFD.
- Každá podmínka ve stavovém diagramu musí odpovídat nějakému vstupnímu řídícímu toku, který vede do řídícího procesu sdruženého s příslušným STD.
- Každé akci stavového diagramu musí odpovídat nějaký výstupní řídící tok řídícího procesu sdruženého se tímto STD.
